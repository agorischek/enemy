var app=new Vue({el:"#app",data:{default:{registers:[1,1,1,1,1,1,1,1,1],pointerA:1,pointerB:2,status:"stop",output:[],currentCommandIndex:-1},delay:settings.delay,max:settings.max,min:settings.min,defaultProgram:settings.defaultProgram,registers:null,commands:commands,commandMap:commandMap,programs:programs,pointerA:null,pointerB:null,currentCommandIndex:null,output:null,settings:settings,status:null,inputValue:null,edit:"",readableCode:!1},watch:{status:function(){"go"!=app.status&&"step"!=app.status||this.nextStep()}},methods:{step:function(){app.status="step"},reset:function(){this.status=this.default.status,this.currentCommandIndex=this.default.currentCommandIndex;var t=this.default.registers.slice();this.registers=t,this.pointerA=this.default.pointerA,this.pointerB=this.default.pointerB;var n=this.default.output.slice();this.output=n},withinRange:function(t){return!(t>=this.max)&&!(t<=this.min)},updateRegister:function(t,n){this.registers.splice(t,1,n)},runProgram:function(){this.status="go"},pauseProgram:function(){this.status="pause"},getInput:function(){this.status="input",$("#input-box").focus()},submitInput:function(){var t=this.pointerA-1,n=Number(this.inputValue);NaN!=n&&(this.inputValue="",this.updateRegister(t,n),this.status="go")},nextStep:function(){switch(this.currentCommand){case"LL":this.commands.LL();break;case"LR":this.commands.LR();break;case"RL":this.commands.RL();break;case"RR":this.commands.RR();break;case"OP":this.commands.OP();break;case"CL":this.commands.CL();break;case"GV":this.commands.GV();break;case"TK":this.commands.TK();break}this.currentCommandIndex++,"input"!=this.status&&"step"!=this.status&&(this.status="delay",setTimeout(this.proceed,this.delay)),"step"==this.status&&(this.status="pause")},proceed:function(){this.currentCommandIndex>=this.programLength?this.status="done":"delay"==this.status&&(this.status="go")},showUnderline:function(t){return-1!=this.pointerRange.indexOf(t)}},computed:{parseEditAs:function(){var t=this.edit.charAt(0).toLowerCase(),n="";return"–"==t||"—"==t?n="proper":"n"==t||"m"==t?n="legible":"l"!=t&&"r"!=t&&"o"!=t&&"c"!=t&&"g"!=t&&"t"!=t||(n="shorthand"),n},program:function(){return"edit"==this.defaultProgram?this.editParsed?this.editParsed.slice():null:this.programs[this.defaultProgram]},editParsed:function(){var t=this.edit,n=null,e=null;return"proper"==this.parseEditAs?(t=t.match(/[–—]+/g).join(""),t=t.match(/.{3}/g),n=this.properToShorthand,t&&t.forEach(function(e,s){t[s]=n[e]})):"shorthand"==this.parseEditAs?(t=t.match(/[LROPCLGVTK]+/g).join(""),t=t.match(/.{2}/g)):"legible"==this.parseEditAs&&(t=t.match(/[nm]+/g).join(""),t=this.edit.match(/.{3}/g),n=this.legibleToShorthand,t&&t.forEach(function(e,s){t[s]=n[e]})),t},outputFormatted:function(){return this.output?this.output.join(""):null},openCloseMatches:function(){var t=this.program.slice(),n=[];return t.forEach(function(e,s){if("OP"==e){var r=s,o=0,i=!1;t.forEach(function(t,e){if(0==i&&e>r)if("CL"==t&&0==o){var s=e;n.push([r,s]),i=!0}else"CL"==t?o-=1:"OP"==t&&(o+=1)})}}),n},openCommands:function(){var t=this.program.slice(),n=[];return t.forEach(function(t,e){"OP"==t&&n.push(e)}),n},openCount:function(){return this.openCommands.length},closeCommands:function(){var t=this.program.slice(),n=[];return t.forEach(function(t,e){"CL"==t&&n.push(e)}),n},closeCount:function(){return this.closeCommands.length},openCloseMatch:function(){return this.openCount==this.closeCount},openCloseCount:function(){return this.openCount>this.closeCount?this.openCount:this.closeCount},openClosePairs:function(){var t={},n={},e=this.openCloseMatches.slice(),s=this.openCount;return e.forEach(function(s,r){t[e[r][0]]=e[r][1],n[e[r][1]]=e[r][0]}),{open:t,close:n}},pointersAreEqual:function(){return this.pointerA==this.pointerB},pointerAValue:function(){return this.registers[this.pointerA-1]},pointerBValue:function(){return this.registers[this.pointerB-1]},registryLength:function(){return this.registers.slice().length},programLength:function(){return this.program.slice().length},currentCommand:function(){return this.program[this.currentCommandIndex]},pointerRange:function(){for(var t=[],n=this.pointerA,e=this.pointerB;n<=e;)t.push(n++);return t},verbose:function(){var t=this.program.slice(),n=this.shorthandToVerbose;return t.forEach(function(e,s){t[s]=n[e]}),t},shorthandOutput:function(){return this.shorthand.slice().join(" ")},shorthand:function(){return this.program.slice()},shorthandOutput:function(){return this.shorthand.slice().join("")},legible:function(){var t=this.program.slice(),n=this.shorthandToLegible;return t.forEach(function(e,s){t[s]=n[e]}),t},legibleOutput:function(){return this.legible.slice().join("")},proper:function(){var t=this.program.slice(),n=this.shorthandToProper;return t.forEach(function(e,s){t[s]=n[e]}),t},properOutput:function(){return this.proper.slice().join("")},shorthandToLegible:function(){var t={};return $.each(commandMap,function(n,e){var s=commandMap[n].shorthand,r=commandMap[n].legible;t[s]=r}),t},shorthandToProper:function(){var t={};return $.each(commandMap,function(n,e){var s=commandMap[n].shorthand,r=commandMap[n].proper;t[s]=r}),t},shorthandToVerbose:function(){var t={};return $.each(commandMap,function(n,e){var s=commandMap[n].shorthand,r=commandMap[n].verbose;t[s]=r}),t},properToShorthand:function(){var t={};return $.each(commandMap,function(n,e){var s=commandMap[n].proper,r=commandMap[n].shorthand;t[s]=r}),t},legibleToShorthand:function(){var t={};return $.each(commandMap,function(n,e){var s=commandMap[n].legible,r=commandMap[n].shorthand;t[s]=r}),t}}});